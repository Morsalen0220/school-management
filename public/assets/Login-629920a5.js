import{a as e,r as s,b as N,c as k,j as o}from"./index-37e3ab65.js";import{B as b}from"./Button-17933d3d.js";import{E as C}from"./EmailInput-859f2a6a.js";import{L as m}from"./Label-105b102c.js";import{P as L}from"./PasswordInput-286250fe.js";import{u as E}from"./useUpdateTitle-f224ea83.js";import{L as f}from"./Link-ae427224.js";import{u as j,h as P}from"./http-b757c274.js";import{i as g,N as S}from"./isEmpty-5f27529e.js";function B({...a}){return e("input",{type:"checkbox",className:"inline-block",...a})}function D(){const[a,h]=s.useState(!1),[n,x]=s.useState(""),[l,v]=s.useState(""),[d,i]=s.useState({}),[w,p]=s.useState(!1),c=N();j(w);const{role:t}=k();E(`${t} login`),s.useEffect(()=>{t!=="student"&&t!=="parent"&&t!=="teacher"&&t!=="librarian"&&t!=="accountant"&&t!=="admin"&&t!=="super-admin"&&c("/login")},[c,t]);const u=()=>h(!a),y=s.useCallback(async()=>{if(g(n))return i({text:"email is required",type:"error"});if(g(l))return i({text:"password is required",type:"error"});p(!0);try{await P.post(`login/${t}`,{email:n,password:l,onetime:!a},{headers:{"content-type":"application/json"}}),i({text:"logged in success, redirecting please wait...",type:"success"}),c("/")}catch(r){i({text:r.response.data.message[0],type:"error"})}finally{p(!1)}},[a,n,l,c,t]);return o("div",{className:"bg-white p-4 max-w-lg flex-grow rounded-sm shadow-2xl",children:[e("div",{className:"p-2"}),o("h1",{className:"text-3xl text-gray-900 font-semibold tracking-normal font-lato",children:[t.slice(0,1).toUpperCase(),t.slice(1)," login"]}),o("p",{children:[o(f,{to:"/login",children:["not ",t,"?"]})," login as other user"]}),e("div",{className:"p-2"}),e(m,{children:"Email"}),e(C,{name:"email",value:n,onInput:r=>x(r.target.value)}),e("div",{className:"p-1"}),e(m,{children:"Password"}),e(L,{name:"password",value:l,onInput:r=>v(r.target.value)}),o("div",{className:"flex justify-between mt-1",children:[o("div",{children:[e(B,{checked:a,onChange:u}),e("span",{className:"ml-1"}),e(m,{small:!0,onClick:u,children:"remember me"})]}),e("div",{children:e(m,{small:!0,children:e(f,{to:`/login/${t}/forgot-password`,children:"forgot password?"})})})]}),e("div",{className:"p-2"}),e(b,{onClick:y,children:"Login"}),e("div",{className:"p-2"}),d.text&&e(S,{type:d.type,onClose:()=>i({}),closeOnBGClick:!0,children:d.text})]})}export{D as default};
