import{c as N,r as p,b as x,j as s,a}from"./index-1b9cd0c6.js";import{E as y}from"./EmailInput-4f5d1958.js";import{L as m}from"./Label-99b5ab32.js";import{T as _}from"./TextInput-675f72f0.js";import{R as l,N as v,I}from"./Number-16ae4379.js";import{u as F}from"./useUpdateTitle-fb2e2d05.js";import{u}from"./uppercaseFirstLetter-d3dabad6.js";import{P as f}from"./PasswordInput-e7891627.js";import{B as C}from"./Button-bdd968da.js";import{N as E,i as n}from"./isEmpty-cc6011a7.js";import{i as L}from"./isEmail-2fee8878.js";import{u as P,h as b}from"./http-49edf251.js";function O(){const{role:o}=N();F("Add New "+u(o));const[e,i]=p.useState({name:"",email:"",mobile_number:"",password:"",c_password:"",image:null}),[h,c]=p.useState(!1),[d,r]=p.useState({});P(h);const g=x(),w=async()=>{if(console.log(e),n(e.name)||n(e.email)||n(e.mobile_number)||n(e.password)||n(e.c_password)){r({text:"please fill all required field",type:"error"});return}if(e.c_password!==e.password){r({text:"password doesn't match",type:"error"});return}if(!L(e.email)){r({text:"email is invalid",type:"error"});return}r({}),e.mobile_number.startsWith("+")||(e.mobile_number="+"+e.mobile_number);try{if(c(!0),e.image){const t=await b.post("/image",{image:e.image},{headers:{"Content-Type":"multipart/form-data"}});e.image=t.data.data.name}await b.post("/user/"+o,e,{headers:{"Content-Type":"application/json"}}),r({text:u(o)+" added successfully",type:"success"}),g("/users/"+o)}catch(t){console.log(t),r({text:t.response.data.message[0],type:"error"})}finally{c(!1)}};return s("div",{children:[a("div",{className:"border-b-2 mb-3 pb-2",children:s("h2",{className:"text-2xl font-lato font-semibold",children:["Add New ",u(o)]})}),s(m,{htmlFor:"name",children:["Name ",a(l,{})]}),a(_,{id:"name",value:e.name,onInput:t=>i({...e,name:t.target.value})}),s(m,{htmlFor:"email",children:["Email ",a(l,{})]}),a(y,{id:"email",value:e.email,onInput:t=>i({...e,email:t.target.value})}),s(m,{children:["Mobile Number",a(l,{})]}),a(v,{number:e.mobile_number,setNumber:t=>i({...e,mobile_number:t})}),s(m,{htmlFor:"password",children:["Password ",a(l,{})]}),a(f,{id:"password",value:e.password,onInput:t=>i({...e,password:t.target.value})}),s(m,{htmlFor:"c_password",children:["Confirm Password ",a(l,{})]}),a(f,{id:"c_password",value:e.c_password,onInput:t=>i({...e,c_password:t.target.value})}),a("p",{className:"mt-2"}),a(m,{htmlFor:"image",children:"Select image"}),a("br",{}),a(I,{id:"image",setFile:t=>i({...e,image:t})}),a("p",{className:"mt-2"}),s(C,{onClick:w,children:["Add new ",o]}),d.text&&a(E,{type:d.type,onClose:()=>r({}),closeOnBGClick:!0,children:d.text})]})}export{O as default};
