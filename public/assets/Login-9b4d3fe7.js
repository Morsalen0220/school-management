import{a as e,r as a,b as k,j as l}from"./index-1b9cd0c6.js";import{B as y}from"./Button-bdd968da.js";import{E as C}from"./EmailInput-4f5d1958.js";import{L as c}from"./Label-99b5ab32.js";import{P as v}from"./PasswordInput-e7891627.js";import{u as L}from"./useUpdateTitle-fb2e2d05.js";import{L as S}from"./Link-fdd0db16.js";import{u as $,h as E}from"./http-49edf251.js";import{i as f,N as j}from"./isEmpty-cc6011a7.js";import{i as P}from"./isEmail-2fee8878.js";function B({...r}){return e("input",{type:"checkbox",className:"inline-block",...r})}function F(){const[r,g]=a.useState(!1),[n,w]=a.useState(""),[d,x]=a.useState(""),[p,i]=a.useState({}),[b,m]=a.useState(!1),u=k();$(b);const[t,s]=a.useState("student");L(`${t} login`);const h=()=>g(!r),N=a.useCallback(async()=>{if(f(n))return i({text:"email is required",type:"error"});if(f(d))return i({text:"password is required",type:"error"});if(!P(n))return i({text:"please enter a valid email",type:"error"});m(!0);try{await E.post(`login/${t}`,{email:n,password:d,onetime:!r},{headers:{"content-type":"application/json"}}),i({text:"logged in success, redirecting please wait...",type:"success"}),u("/")}catch(o){i({text:o.response.data.message[0],type:"error"})}finally{m(!1)}},[r,n,d,u,t]);return l("div",{className:"bg-white p-4 max-w-3xl flex-grow rounded-sm shadow-2xl",children:[e("div",{className:"p-2"}),l("h1",{className:"text-3xl text-gray-900 font-semibold tracking-normal font-lato my-4",children:[t.slice(0,1).toUpperCase(),t.slice(1)," login"]}),e(c,{children:"Login as"}),l("div",{className:"flex justify-between items-center bg-white my-2 text-center",children:[e("span",{onClick:()=>s("student"),className:`p-1 cursor-pointer w-full border ${t==="student"&&"bg-slate-800 text-white"}`,children:"Student"}),e("span",{onClick:()=>s("parent"),className:`p-1 cursor-pointer w-full border ${t==="parent"&&"bg-slate-800 text-white"}`,children:"Parent"}),e("span",{onClick:()=>s("school"),className:`p-1 cursor-pointer w-full border ${t==="school"&&"bg-slate-800 text-white"}`,children:"School"}),e("span",{onClick:()=>s("librarian"),className:`p-1 cursor-pointer w-full border ${t==="librarian"&&"bg-slate-800 text-white"}`,children:"Librarian"}),e("span",{onClick:()=>s("accountant"),className:`p-1 cursor-pointer w-full border ${t==="accountant"&&"bg-slate-800 text-white"}`,children:"Accountant"}),e("span",{onClick:()=>s("admin"),className:`p-1 cursor-pointer w-full border ${t==="admin"&&"bg-slate-800 text-white"}`,children:"Admin"}),e("span",{onClick:()=>s("super-admin"),className:`p-1 cursor-pointer w-full border ${t==="super-admin"&&"bg-slate-800 text-white"}`,children:"Super Admin"})]}),e(c,{children:"Email"}),e(C,{name:"email",value:n,onInput:o=>w(o.target.value)}),e("div",{className:"p-1"}),e(c,{children:"Password"}),e(v,{name:"password",value:d,onInput:o=>x(o.target.value)}),l("div",{className:"flex justify-between mt-1",children:[l("div",{children:[e(B,{checked:r,onChange:h}),e("span",{className:"ml-1"}),e(c,{small:!0,onClick:h,children:"remember me"})]}),e("div",{children:e(c,{small:!0,children:e(S,{to:"/forgot-password",children:"forgot password?"})})})]}),e("div",{className:"p-2"}),e(y,{onClick:N,children:"Login"}),e("div",{className:"p-2"}),p.text&&e(j,{type:p.type,onClose:()=>i({}),closeOnBGClick:!0,children:p.text})]})}export{F as default};
