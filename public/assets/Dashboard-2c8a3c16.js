import{r as u,u as p,j as a,a as e,L as b,b as x}from"./index-1b9cd0c6.js";import{u as v,h as w}from"./http-49edf251.js";function f({open:t=!1}){return e("span",{className:`inline-block ml-2  ${t?"-rotate-90":"rotate-180"}`,children:"❮"})}function l({to:t="#",topLevelMenu:n=!1,exact:i=!1,children:h,hightLight:o=!1,...c}){const{pathname:s}=p();let d=s.startsWith(t);return d&&i&&(d=s===t||s===t+"/"),e(b,{className:`inline-block font-sans px-4 text-left border-b-2 ${n?"":"last:border-b-0 "} ${d?n?"bg-emerald-300 text-gray-900 border-white font-semibold":"bg-gray-200":"text-black hover:bg-gray-200 "} ${!d&&o?"bg-gray-200":""} `,to:t,...c,children:h})}function N({...t}){const[n,i]=u.useState(!1),{pathname:h}=p(),[o,c]=u.useState([]);u.useEffect(()=>{if(h==="/")return;const r=h.slice(1).replace(/[/].+/,"");c([r])},[h]),u.useEffect(()=>{window.innerWidth>1024&&i(!0)},[]);const s=r=>o.includes(r),d=r=>{if(o.includes(r))return c([...o.filter(g=>g!==r)]);c([...o,r])};return a("aside",{className:`relative shadow-xl min-h-screen w-full transition bg-white border-t-2 ${n?"max-w-fit":"max-w-0"}`,children:[a("nav",{className:"overflow-hidden transition flex flex-col",children:[e(l,{to:"/school",topLevelMenu:!0,hightLight:s("school"),onClick:r=>{r.preventDefault(),d("school")},children:a("div",{className:"flex justify-between",children:[e("span",{children:"School"})," ",e(f,{open:s("school")})]})}),e("div",{className:`border-b-2 ${s("school")?"":"hidden"}`,children:a("div",{className:"flex flex-col ml-2",children:[e(l,{to:"/school",exact:!0,children:"View"}),e(l,{to:"/school/add",children:"Add new"})]})}),e(l,{to:"/users",topLevelMenu:!0,hightLight:s("users"),onClick:r=>{r.preventDefault(),d("users")},children:a("div",{className:"flex justify-between",children:[e("span",{children:" Users"})," ",e(f,{open:s("users")})]})}),e("div",{className:`border-b-2 ${s("users")?"":"hidden"}`,children:a("div",{className:"flex flex-col ml-2",children:[e(l,{to:"/users/admin",children:"Admin"}),e(l,{to:"/users/accountant",children:"Accountant"}),e(l,{to:"/users/student",children:"Student"}),e(l,{to:"/users/librarian",children:"Librarian"}),e(l,{to:"/users/parent",children:"Parent"}),e(l,{to:"/users/teacher",children:"Teacher"})]})}),e(l,{to:"/class",topLevelMenu:!0,hightLight:s("class"),onClick:r=>{r.preventDefault(),d("class")},children:a("div",{className:"flex justify-between",children:[e("span",{children:"Class"}),e(f,{open:s("class")})]})}),e(l,{to:"/notice",topLevelMenu:!0,children:"Notice"}),e(l,{to:"/exam",topLevelMenu:!0,children:"Exam"}),e(l,{to:"/book",topLevelMenu:!0,children:"Books"})]}),e("span",{title:n?"close menu":"open menu",className:`inline-block absolute bg-emerald-300 rounded-full text-white font-extrabold font-lato p-1 px-2 cursor-pointer select-none transition top-52 z-20 ${n?"-right-5":"-left-2 hover:left-1"}`,onClick:()=>i(!n),children:n?e("span",{className:"inline-block rotate-180",children:"➤"}):e("span",{children:"➤"})})]})}const k="",M=k,L={image:`${M}/public/uploads/image`},y=L;function m({to:t,children:n,...i}){return e(b,{className:"inline-block w-full px-2 cursor-pointer hover:bg-gray-100 font-sans",...i,to:t,children:n})}function $(){return a("div",{className:"absolute right-4 shadow-2xl rounded-sm bg-slate-100 z-20",children:[e(m,{to:"/profile",children:"Profile"}),e(m,{to:"/settings",children:"Settings"}),e("hr",{}),e(m,{to:"/logout",children:"Logout"})]})}function j({...t}){const[n,i]=u.useState(!1);return a("header",{className:"relative",...t,children:[a("div",{className:"h-full bg-white shadow-xl p-2 flex justify-between items-center",children:[e("h4",{className:"font-lato text-lg font-semibold",children:"Title here"}),e("div",{children:e("span",{className:"inline-block h-10 bg-white-500 border-2 border-emerald-300 rounded-full p-1 cursor-pointer",onClick:()=>i(!n),children:e("img",{src:`${y.image}/user.png`,alt:"user",className:"max-h-full"})})})]}),n&&e($,{})]})}function S(t){return Object.keys(t).length===0}function C({children:t}){const[n,i]=u.useState({}),[h,o]=u.useState(!0),c=x();return v(h),u.useEffect(()=>{w.get("/user/me").then(s=>{i(s.data.data)}).catch(()=>{c("/login")}).finally(()=>{o(!1)})},[c]),S(n)===!1&&a("div",{children:[e(j,{}),a("div",{className:"flex",children:[e(N,{}),e("main",{className:"bg-white w-full m-2 mr-0 mb-0 shadow-lg relative z-10 rounded-sm p-2",children:t})]})]})}export{C as default};
