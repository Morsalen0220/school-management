import{c as j,b as v,r as t,j as S,a as s,L as C}from"./index-1b9cd0c6.js";import{S as T}from"./Button-bdd968da.js";import{N as w}from"./isEmpty-cc6011a7.js";import{g as a,T as I}from"./Table-de768a07.js";import{u as k,h as A}from"./http-49edf251.js";import{u as D}from"./useUpdateTitle-fb2e2d05.js";import{u as b}from"./uppercaseFirstLetter-d3dabad6.js";const U=["admin","accountant","student","librarian","parent","teacher"];function J({...B}){const{role:r}=j();D(b(r));const x=v();U.includes(r.toLowerCase())||x("/");const[_,L]=t.useState([]),[$,N]=t.useState(!0),[o,m]=t.useState({});k($);const[i,f]=t.useState("asc"),[c,h]=t.useState("id"),[n,p]=t.useState(""),[d,g]=t.useState(""),[u,y]=t.useState(10),[l,P]=t.useState(1),[E,O]=t.useState(0);return t.useEffect(()=>{const e={order:a("order"),orderBy:a("order_by"),search:a("search"),searchBy:a("search_by"),itemsPerPage:a("limit"),currentPage:a("page")};e.order&&f(e.order),e.orderBy&&h(e.orderBy),e.search&&p(e.search),e.searchBy&&g(e.searchBy),e.itemsPerPage&&y(parseInt(e.itemsPerPage)),e.currentPage&&P(parseInt(e.currentPage))},[]),t.useEffect(()=>{A.get(`/user/${r}?page=${l}&order=${i}&order_by=${c}&limit=${u}&search=${n}&search_by=${d}`).then(e=>{L(e.data.data),O(e.data.total_data_length)}).catch(e=>{m({text:e.response.data.message[0],type:"error"})}).finally(()=>{N(!1)})},[l,u,i,c,n,d,r]),S("div",{...B,children:[S("div",{className:"flex justify-between items-center border-b-2 mb-3 pb-2",children:[s("h2",{className:"text-2xl font-lato font-semibold",children:b(r)}),s(T,{children:s(C,{to:`/users/${r}/add`,children:"Add new"})})]}),s(I,{order:i,setOrder:f,orderBy:c,setOrderBy:h,itemsPerPage:u,setItemsPerPage:y,currentPage:l,setCurrentPage:P,search:n,setSearch:p,searchBy:d,setSearchBy:g,total:E,title:["id","user_id","name","school_id","email","image","created_by"],footer:!0,data:_}),o.text&&s(w,{type:o.type,onClose:()=>m({}),closeOnBGClick:!0,children:o.text})]})}export{J as default};
