import{a,r as m,b,j as s}from"./index-1b9cd0c6.js";import{S as x,B as y}from"./Button-bdd968da.js";import{E as N}from"./EmailInput-4f5d1958.js";import{L as r}from"./Label-99b5ab32.js";import{T as p}from"./TextInput-675f72f0.js";import{N as v,i as l}from"./isEmpty-cc6011a7.js";import{u as S,h as u}from"./http-49edf251.js";import{u as I}from"./useUpdateTitle-fb2e2d05.js";import{i as w}from"./isEmail-2fee8878.js";import{R as n,N as F,I as A}from"./Number-16ae4379.js";function E({children:e,...o}){return a("select",{...o,className:"p-2 border-2 bg-slate-50 block w-full cursor-pointer rounded-sm",children:e})}function T({children:e,...o}){return a("textarea",{...o,className:"bg-gray-50 border-2 p-1 focus:outline-none focus:border-gray-500 block w-full text-lg text-gray-900 rounded-sm"})}function M(){I("Add new school");const[e,o]=m.useState({name:"",email:"",phone:"",address:"",description:"",image:"",admin:[]}),[h,c]=m.useState(!1),[d,i]=m.useState({});S(h);const f=b(),g=async()=>{if(l(e.name)||l(e.email)||l(e.phone)||l(e.address)){i({text:"please fill all required field",type:"error"});return}if(!w(e.email)){i({text:"email is invalid",type:"error"});return}i({}),e.phone.startsWith("+")||(e.phone="+"+e.phone);try{if(c(!0),e.image){const t=await u.post("/image",{image:e.image},{headers:{"Content-Type":"multipart/form-data"}});e.image=t.data.data.name}await u.post("/school",e,{headers:{"Content-Type":"application/json"}}),i({text:"School added successfully",type:"success"}),f("/school")}catch(t){console.log(t),i({text:t.response.data.message[0],type:"error"})}finally{c(!1)}};return s("div",{children:[a("div",{className:"border-b-2 mb-3 pb-2",children:a("h2",{className:"text-2xl font-lato font-semibold",children:"Add New School"})}),s(r,{htmlFor:"name",children:["School name ",a(n,{})]}),a(p,{id:"name",value:e.name,onInput:t=>o({...e,name:t.target.value})}),s(r,{htmlFor:"address",children:["Address ",a(n,{})]}),a(p,{id:"address",value:e.address,onInput:t=>o({...e,address:t.target.value})}),s(r,{htmlFor:"phone",children:["Phone number ",a(n,{})]}),a(F,{number:e.phone,setNumber:t=>o({...e,phone:t})}),a(r,{htmlFor:"description",children:"Description "}),a(T,{id:"description",defaultValue:e.description,onInput:t=>o({...e,description:t.target.value})}),s(r,{htmlFor:"email",children:["Email ",a(n,{})]}),a(N,{id:"email",value:e.email,onInput:t=>o({...e,email:t.target.value})}),s(r,{children:["Select Admin ",a(n,{})]}),a(E,{children:a("option",{value:"admin",children:"admin"})}),a("p",{className:"mt-1"}),a(x,{children:"add another admin"}),a("p",{className:"mt-2"}),a(r,{htmlFor:"image",children:"Select image"}),a("br",{}),a(A,{id:"image",setFile:t=>o({...e,image:t})}),a("p",{className:"mt-2"}),a(y,{onClick:g,children:"Add new school"}),d.text&&a(v,{type:d.type,onClose:()=>i({}),closeOnBGClick:!0,children:d.text})]})}export{M as default};
