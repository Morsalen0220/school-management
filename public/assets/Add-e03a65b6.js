import{c as N,r as p,b as _,j as s,a}from"./index-37e3ab65.js";import{E as x}from"./EmailInput-859f2a6a.js";import{L as m}from"./Label-105b102c.js";import{T as y,i as v}from"./isEmail-4b2ad8e6.js";import{R as l,N as I,I as F}from"./Number-a3e5fa32.js";import{u as C}from"./useUpdateTitle-f224ea83.js";import{u}from"./uppercaseFirstLetter-d3dabad6.js";import{P as f}from"./PasswordInput-286250fe.js";import{B as E}from"./Button-17933d3d.js";import{N as L,i as n}from"./isEmpty-5f27529e.js";import{u as P,h as b}from"./http-b757c274.js";function G(){const{role:r}=N();C("Add New "+u(r));const[e,o]=p.useState({name:"",email:"",mobile_number:"",password:"",c_password:"",image:null}),[h,c]=p.useState(!1),[d,i]=p.useState({});P(h);const g=_(),w=async()=>{if(console.log(e),n(e.name)||n(e.email)||n(e.mobile_number)||n(e.password)||n(e.c_password)){i({text:"please fill all required field",type:"error"});return}if(e.c_password!==e.password){i({text:"password doesn't match",type:"error"});return}v(e.email),i({}),e.mobile_number.startsWith("+")||(e.mobile_number="+"+e.mobile_number);try{if(c(!0),e.image){const t=await b.post("/image",{image:e.image},{headers:{"Content-Type":"multipart/form-data"}});e.image=t.data.data.name}await b.post("/user/"+r,e,{headers:{"Content-Type":"application/json"}}),i({text:u(r)+" added successfully",type:"success"}),g("/users/"+r)}catch(t){console.log(t),i({text:t.response.data.message[0],type:"error"})}finally{c(!1)}};return s("div",{children:[a("div",{className:"border-b-2 mb-3 pb-2",children:s("h2",{className:"text-2xl font-lato font-semibold",children:["Add New ",u(r)]})}),s(m,{htmlFor:"name",children:["Name ",a(l,{})]}),a(y,{id:"name",value:e.name,onInput:t=>o({...e,name:t.target.value})}),s(m,{htmlFor:"email",children:["Email ",a(l,{})]}),a(x,{id:"email",value:e.email,onInput:t=>o({...e,email:t.target.value})}),s(m,{children:["Mobile Number",a(l,{})]}),a(I,{number:e.mobile_number,setNumber:t=>o({...e,mobile_number:t})}),s(m,{htmlFor:"password",children:["Password ",a(l,{})]}),a(f,{id:"password",value:e.password,onInput:t=>o({...e,password:t.target.value})}),s(m,{htmlFor:"c_password",children:["Confirm Password ",a(l,{})]}),a(f,{id:"c_password",value:e.c_password,onInput:t=>o({...e,c_password:t.target.value})}),a("p",{className:"mt-2"}),a(m,{htmlFor:"image",children:"Select image"}),a("br",{}),a(F,{id:"image",setFile:t=>o({...e,image:t})}),a("p",{className:"mt-2"}),s(E,{onClick:w,children:["Add new ",r]}),d.text&&a(L,{type:d.type,onClose:()=>i({}),closeOnBGClick:!0,children:d.text})]})}export{G as default};
