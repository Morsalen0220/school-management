{"version":3,"file":"static/js/208.ec257c1a.chunk.js","mappings":"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","sources":["components/Link.jsx","components/input/PasswordInput.jsx","hooks/useUpdateTitle.js","components/input/Checkbox.jsx","pages/auth/Login.jsx","util/http.js"],"sourcesContent":["import { Link as RouterLink } from \"react-router-dom\";\r\nexport default function Link({ children, ...props }) {\r\n  return (\r\n    <RouterLink className=\"underline hover:text-teal-500 font-sans\" {...props}>\r\n      {children}\r\n    </RouterLink>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport showImg from \"./../../img/show.png\";\r\nimport hideImg from \"./../../img/hide.png\";\r\n\r\nexport default function PasswordInput({ ...props }) {\r\n  const [type, setType] = useState(\"password\");\r\n  const [img, setImg] = useState(showImg);\r\n  /**\r\n   * toggle password\r\n   */\r\n  const togglePassword = () => {\r\n    if (type === \"password\") {\r\n      setImg(hideImg);\r\n      return setType(\"text\");\r\n    }\r\n    setImg(showImg);\r\n    setType(\"password\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <input\r\n        type={type}\r\n        className=\"bg-slate-50 border-2 p-1 rounded-sm w-full focus:border-gray-500 focus:outline-none text-lg text-gray-900\"\r\n        {...props}\r\n      />\r\n      <span\r\n        onClick={togglePassword}\r\n        className=\"inline-block absolute top-0 right-1 p-1 cursor-pointer\">\r\n        <img alt=\"toggle\" src={img} />\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\n\r\nexport default function useUpdateTitle(title) {\r\n    const prevTitle = document.title;\r\n\r\n    useEffect(() => {\r\n        document.title = title;\r\n        return () => document.title = prevTitle; // Reset title on unmount\r\n    }, [title, prevTitle]);\r\n}","export default function CheckBox({ ...props }) {\r\n  return <input type=\"checkbox\" className=\"inline-block\" {...props} />;\r\n}\r\n","import { useState } from \"react\";\r\nimport Button from \"../../components/button/Button\";\r\nimport CheckBox from \"../../components/input/Checkbox\";\r\nimport EmailInput from \"../../components/input/EmailInput\";\r\nimport Label from \"../../components/input/Label\";\r\nimport PasswordInput from \"../../components/input/PasswordInput\";\r\nimport useUpdateTitle from \"../../hooks/useUpdateTitle\";\r\nimport Link from \"../../components/Link\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport http from \"../../util/http\";\r\nimport Notification from \"../../components/Notification\";\r\nimport isEmpty from \"../../util/isEmpty\";\r\nimport isEmail from \"../../util/isEmail\";\r\nimport useLoading from \"../../hooks/useLoading\";\r\nimport { useEffect } from \"react\";\r\nimport { useCallback } from \"react\";\r\n\r\n/**\r\n * Login page\r\n */\r\nfunction Login() {\r\n  const [checked, setChecked] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [notification, setNotification] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n  useLoading(loading);\r\n\r\n  /** Handle user role dynamically */\r\n  const { role } = useParams();\r\n\r\n  useUpdateTitle(`${role} login`);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      role !== \"student\" &&\r\n      role !== \"parent\" &&\r\n      role !== \"teacher\" &&\r\n      role !== \"librarian\" &&\r\n      role !== \"accountant\" &&\r\n      role !== \"admin\" &&\r\n      role !== \"super-admin\"\r\n    )\r\n      navigate(\"/login\");\r\n  }, [navigate, role]);\r\n\r\n  const toggleChecked = () => setChecked(!checked);\r\n\r\n  /**\r\n   * Login request for user\r\n   */\r\n  const login = useCallback(async () => {\r\n    if (isEmpty(email))\r\n      return setNotification({\r\n        text: \"email is required\",\r\n        type: \"error\",\r\n      });\r\n\r\n    if (isEmpty(password))\r\n      return setNotification({\r\n        text: \"password is required\",\r\n        type: \"error\",\r\n      });\r\n\r\n    if (!isEmail(email))\r\n      return setNotification({\r\n        text: \"please enter a valid email\",\r\n        type: \"error\",\r\n      });\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      await http.post(\r\n        `login/${role}`,\r\n        { email, password, onetime: !checked },\r\n        {\r\n          headers: {\r\n            \"content-type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      setNotification({\r\n        text: \"logged in success, redirecting please wait...\",\r\n        type: \"success\",\r\n      });\r\n\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      setNotification({\r\n        text: error.response.data.message[0],\r\n        type: \"error\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [checked, email, password, navigate, role]);\r\n\r\n\r\n  return (\r\n    <div className=\"bg-white p-4 max-w-lg flex-grow rounded-sm shadow-2xl\">\r\n      <div className=\"p-2\"></div>\r\n      <h1 className=\"text-3xl text-gray-900 font-semibold tracking-normal font-lato\">\r\n        {role.slice(0, 1).toUpperCase()}\r\n        {role.slice(1)} login\r\n      </h1>\r\n      <p>\r\n        <Link to=\"/login\">not {role}?</Link> login as other user\r\n      </p>\r\n\r\n      <div className=\"p-2\"></div>\r\n      <Label>Email</Label>\r\n      <EmailInput\r\n        name=\"email\"\r\n        value={email}\r\n        onInput={(e) => setEmail(e.target.value)}\r\n      />\r\n\r\n      <div className=\"p-1\"></div>\r\n\r\n      <Label>Password</Label>\r\n      <PasswordInput\r\n        name=\"password\"\r\n        value={password}\r\n        onInput={(e) => setPassword(e.target.value)}\r\n      />\r\n\r\n      <div className=\"flex justify-between mt-1\">\r\n        <div>\r\n          <CheckBox checked={checked} onChange={toggleChecked} />\r\n          <span className=\"ml-1\"></span>\r\n          <Label small={true} onClick={toggleChecked}>\r\n            remember me\r\n          </Label>\r\n        </div>\r\n        <div>\r\n          <Label small={true}>\r\n            <Link to={`/login/${role}/forgot-password`}>forgot password?</Link>\r\n          </Label>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-2\"></div>\r\n      <Button onClick={login}>Login</Button>\r\n      <div className=\"p-2\"></div>\r\n      {notification.text && (\r\n        <Notification\r\n          type={notification.type}\r\n          onClose={() => setNotification({})}\r\n          closeOnBGClick={true}\r\n        >\r\n          {notification.text}\r\n        </Notification>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import axios from \"axios\";\r\n\r\nconst productionURL = '/api';\r\nconst devURL = 'http://localhost/api';\r\n\r\nexport default axios.create({\r\n    baseURL: process.env.NODE_ENV === 'production' ? productionURL : devURL,\r\n    withCredentials: true\r\n});"],"names":["Link","children","props","className","PasswordInput","useState","type","setType","showImg","img","setImg","onClick","alt","src","useUpdateTitle","title","prevTitle","document","useEffect","CheckBox","checked","setChecked","email","setEmail","password","setPassword","notification","setNotification","loading","setLoading","navigate","useNavigate","useLoading","role","useParams","toggleChecked","login","useCallback","isEmpty","text","isEmail","http","onetime","headers","response","data","message","slice","toUpperCase","to","Label","EmailInput","name","value","onInput","e","target","onChange","small","Button","Notification","onClose","closeOnBGClick","axios","baseURL","withCredentials"],"sourceRoot":""}